{% stylesheet %}
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }
  body {
    background-color: #04040d;
    font-family: 'Inter', sans-serif;
  }
  .container {
    width: 100%;
    margin: 0 auto;
    padding-left: 20px;
    padding-right: 20px;
    max-width: 1440px;
  }

  .navbar .container {
    display: flex;
    justify-content: space-between;
    align-items: center;
    width: 100%;
    position: relative;
    flex-wrap: wrap;
  }

  /* Extra large desktops */
  @media (min-width: 1600px) {
    .container {
      max-width: 1600px;
      padding-left: 40px;
      padding-right: 40px;
    }
  }

  /* Large desktops */
  @media (max-width: 1440px) {
    .container {
      max-width: 1200px;
    }
  }

  /* Laptops */
  @media (max-width: 1200px) {
    .container {
      max-width: 960px;
    }
  }

  /* Tablets */
  @media (max-width: 992px) {
    .container {
      max-width: 840px;
    }
  }

  /* Landscape phones */
  @media (max-width: 768px) {
    .container {
      max-width: 100%;
      padding-left: 16px;
      padding-right: 16px;
    }
  }

  /* Phones */
  @media (max-width: 576px) {
    .container {
      padding-left: 12px;
      padding-right: 12px;
    }
  }

  /* Extra small phones */
  @media (max-width: 420px) {
    .container {
      padding-left: 10px;
      padding-right: 10px;
    }
  }

  .brand-container {
    display: flex;
    align-items: center;
  }

  .brand-container .brand-logo {
    height: 48px;
    width: auto;
  }

  .navbar {
    background: rgba(4, 4, 13, 0.1);
    border-radius: 12px;
    backdrop-filter: blur(10px);
    padding: 20px;
    position: relative;
    z-index: 1000;
  }

  .navbar .brand-logo {
    height: 48px;
  }

  .mobile-menu-toggle {
    display: none;
    background: transparent;
    border: none;
    cursor: pointer;
    padding: 10px;
    z-index: 1001;
  }

  .toggle-bar {
    display: block;
    width: 25px;
    height: 2px;
    background: white;
    margin: 5px 0;
    transition: all 0.3s ease;
  }

  .mobile-menu-toggle.active .toggle-bar:nth-child(1) {
    transform: translateY(7px) rotate(45deg);
  }

  .mobile-menu-toggle.active .toggle-bar:nth-child(2) {
    opacity: 0;
  }

  .mobile-menu-toggle.active .toggle-bar:nth-child(3) {
    transform: translateY(-7px) rotate(-45deg);
  }

  .nav-links {
    display: flex;
    align-items: center;
    flex-grow: 1;
    justify-content: center;
  }

  .nav-links .navbar-nav {
    display: flex;
    flex-direction: row;
    gap: 30px;
    margin: 0;
    padding: 0;
    list-style: none;
  }

  .nav-links .navbar-nav .nav-item {
    position: relative;
  }

  .nav-links .navbar-nav .nav-item.dropdown:hover .dropdown-menu {
    display: block;
  }

  .nav-links .navbar-nav .nav-link {
    color: #a3a7bd;
    font-size: 18px;
    line-height: 100%;
    text-decoration: none;
    display: flex;
    align-items: center;
    transition: color 0.3s ease;
  }

  .nav-links .navbar-nav .nav-link.active {
    color: #fff;
    font-weight: 700;
  }

  .nav-links .navbar-nav .nav-link:hover {
    color: #fff;
  }

  .nav-links .navbar-nav .nav-link .dropdown-icon {
    transition: transform 0.3s ease;
    margin-left: 5px;
    font-size: 14px;
  }

  .nav-links .navbar-nav .dropdown-menu {
    display: none;
    position: absolute;
    top: 100%;
    left: 0;
    background: rgba(43, 43, 43, 0.9);
    border-radius: 8px;
    padding: 10px 0;
    min-width: 180px;
    z-index: 1000;
    backdrop-filter: blur(5px);
  }

  .nav-links .navbar-nav .dropdown-menu .dropdown-item {
    color: #fff;
    padding: 8px 20px;
    display: block;
    text-decoration: none;
    transition: background 0.3s ease;
    font-size: 16px;
  }

  .nav-links .navbar-nav .dropdown-menu .dropdown-item:hover {
    background: rgba(255, 255, 255, 0.1);
  }

  /* Mobile styles */
  @media (max-width: 992px) {
    .mobile-menu-toggle {
      display: block;
      order: 2;
    }

    .nav-links {
      position: fixed;
      top: 0;
      right: -100%;
      width: 100%;
      max-width: 320px;
      height: 100vh;
      background: rgba(4, 4, 13, 0.98);
      backdrop-filter: blur(10px);
      flex-direction: column;
      justify-content: flex-start;
      padding: 100px 20px 40px;
      transition: right 0.3s ease;
      z-index: 1000;
      overflow-y: auto;
    }

    .nav-links.active {
      right: 0;
    }

    .nav-links .navbar-nav {
      flex-direction: column;
      gap: 20px;
      width: 100%;
    }

    .nav-links .navbar-nav .nav-item {
      width: 100%;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      padding-bottom: 15px;
    }

    .nav-links .navbar-nav .nav-item:last-child {
      border-bottom: none;
    }

    .nav-links .navbar-nav .nav-link {
      padding: 10px 0;
      font-size: 18px;
      justify-content: space-between;
    }

    .nav-links .navbar-nav .dropdown-menu {
      position: static;
      display: none;
      background: transparent;
      padding: 10px 0 0 15px;
      margin-top: 10px;
      border-left: 2px solid #f8b133;
      border-radius: 0;
    }

    .nav-links .navbar-nav .dropdown-menu .dropdown-item {
      padding: 10px 0;
      font-size: 16px;
    }

    .navbar-brand {
      order: 1;
    }

    .action-buttons {
      order: 3;
      margin-left: auto;
    }
  }

  @media (max-width: 576px) {
    .navbar {
      padding: 15px;
    }

    .brand-logo {
      height: 40px !important;
    }

    .nav-links {
      max-width: 280px;
      padding: 80px 20px 30px;
    }

    .nav-links .navbar-nav .nav-link {
      font-size: 16px;
    }

    .nav-links .navbar-nav .dropdown-menu .dropdown-item {
      font-size: 15px;
    }
  }

  @media (max-width: 420px) {
    .navbar {
      padding: 12px;
    }

    .brand-logo {
      height: 36px !important;
    }

    .action-buttons {
      gap: 12px;
    }
  }

  .nav-link.active {
    font-weight: 700;
    color: white;
  }

  .dropdown-menu {
    display: none;
    position: absolute;
    background: rgba(43, 43, 43, 0.9);
  }

  .nav-item.dropdown:hover .dropdown-menu {
    display: block;
  }

  .btn-contact {
    background: transparent;
    background-clip: text;
    -webkit-background-clip: text;
    color: transparent;
  }

  .btn-tickets {
    background: linear-gradient(90deg, #f8b133 0%, #e5332a 100%);
    color: white;
  }

  .action-buttons {
    display: flex;
    gap: 16px;
    margin-left: auto;
    font-family: 'Inter', sans-serif;
  }

  .action-buttons .btn {
    width: 120px;
    height: 40px;
    border-radius: 30px;
    font-size: 14px;
    line-height: 100%;
    font-weight: 500;
    padding: 10px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s ease;
    border: 1px solid transparent;
    text-decoration: none;
    white-space: nowrap;
  }

  .action-buttons .btn-contact {
    position: relative;
    background: transparent;
    color: transparent;
    background: linear-gradient(90deg, #f8b133, #ff7e5f);
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }

  .action-buttons .btn-contact::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    border-radius: 30px;
    padding: 1px;
    background: linear-gradient(90deg, #f8b133, #ff7e5f);
    -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
    -webkit-mask-composite: xor;
    mask-composite: exclude;
    z-index: -1;
  }

  .action-buttons .btn-contact:hover {
    background: transparent;
    color: white;
    -webkit-text-fill-color: initial;
  }

  .action-buttons .btn-tickets {
    background: linear-gradient(90deg, #f8b133, #ff7e5f);
    color: #ffffff;
    border: none;
  }

  .action-buttons .btn-tickets:hover {
    background: transparent;
    color: transparent;
    background: linear-gradient(90deg, #f8b133, #ff7e5f);
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    box-shadow: 0 0 10px rgba(248, 177, 51, 0.5);
  }

  /* Responsive Styles for buttons */
  @media (max-width: 992px) {
    .action-buttons {
      margin-left: 0;
      width: auto;
      order: 3;
    }
  }

  @media (max-width: 768px) {
    .action-buttons {
      position: absolute;
      top: 80px;
      right: 20px;
      flex-direction: row;
      gap: 10px;
    }

    .action-buttons .btn {
      width: 110px;
      height: 36px;
      font-size: 13px;
    }
  }

  @media (max-width: 576px) {
    .action-buttons {
      top: 70px;
      right: 15px;
    }

    .action-buttons .btn {
      width: 100px;
      height: 34px;
      font-size: 12px;
    }
  }

  @media (max-width: 420px) {
    .action-buttons {
      top: 65px;
      right: 12px;
      gap: 8px;
    }

    .action-buttons .btn {
      width: 90px;
      height: 32px;
      font-size: 11px;
    }
  }
{% endstylesheet %}

<nav class="navbar">
  <div class="container">
    <!-- Brand/Logo -->
    <div class="navbar-brand">
      <div class="brand-container">
        <a href="{{ routes.root_url }}">
          {% if section.settings.logo %}
            <img
              src="{{ section.settings.logo | image_url: width: 240 }}"
              alt="{{ shop.name }} Logo"
              class="brand-logo"
              width="120"
              height="48"
              loading="lazy"
            >
          {% else %}
            <span class="logo-text">{{ shop.name }}</span>
          {% endif %}
        </a>
      </div>
    </div>

    <!-- Mobile Menu Toggle -->
    <button class="mobile-menu-toggle" aria-label="Toggle navigation">
      <span class="toggle-bar"></span>
      <span class="toggle-bar"></span>
      <span class="toggle-bar"></span>
    </button>

    <!-- Navigation Links -->
    <div class="nav-links">
      <ul class="navbar-nav">
        {% for link in linklists[section.settings.main_menu].links %}
          {% assign child_list_handle = link.title | handleize %}
          {% if linklists[child_list_handle].links != blank %}
            <li class="nav-item dropdown {% if link.active %}active{% endif %}">
              <a class="nav-link" href="{{ link.url }}">
                {{ link.title }}
                <span class="dropdown-icon">▼</span>
              </a>
              <div class="dropdown-menu">
                {% for childlink in linklists[child_list_handle].links %}
                  <a href="{{ childlink.url }}" class="dropdown-item {% if childlink.active %}active{% endif %}">
                    {{ childlink.title }}
                  </a>
                {% endfor %}
              </div>
            </li>
          {% else %}
            <li class="nav-item {% if link.active %}active{% endif %}">
              <a class="nav-link" href="{{ link.url }}">{{ link.title }}</a>
            </li>
          {% endif %}
        {% endfor %}
      </ul>
    </div>

    <!-- Action Buttons -->
    <div class="action-buttons">
      <a href="{{ section.settings.contact_button_link }}" class="btn btn-contact">
        {{ section.settings.contact_button_text }}
      </a>
      <a href="{{ section.settings.ticket_button_link }}" class="btn btn-tickets">
        {{ section.settings.ticket_button_text }}
      </a>
    </div>
  </div>
</nav>

{% javascript %}
  document.addEventListener('DOMContentLoaded', function () {
    const toggle = document.querySelector('.mobile-menu-toggle');
    const navLinks = document.querySelector('.nav-links');
    const dropdownToggles = document.querySelectorAll('.nav-item.dropdown > .nav-link');
    const body = document.body;

    if (!toggle || !navLinks) return;

    // Mobile menu toggle
    toggle.addEventListener('click', function () {
      this.classList.toggle('active');
      navLinks.classList.toggle('active');
      body.classList.toggle('no-scroll');
    });

    // Mobile dropdown toggles
    dropdownToggles.forEach(function (toggle) {
      toggle.addEventListener('click', function (e) {
        if (window.innerWidth <= 992) {
          e.preventDefault();
          const parent = this.parentElement;
          const isOpen = parent.classList.contains('open');

          // Close all other dropdowns
          document.querySelectorAll('.nav-item.dropdown').forEach(function (item) {
            if (item !== parent) {
              item.classList.remove('open');
            }
          });

          // Toggle current dropdown
          parent.classList.toggle('open');

          // Rotate icon
          const icon = this.querySelector('.dropdown-icon');
          if (icon) {
            icon.style.transform = parent.classList.contains('open') ? 'rotate(180deg)' : 'rotate(0deg)';
          }
        }
      });
    });

    // Close menu when clicking outside
    document.addEventListener('click', function (e) {
      if (!e.target.closest('.navbar') && navLinks.classList.contains('active')) {
        toggle.classList.remove('active');
        navLinks.classList.remove('active');
        body.classList.remove('no-scroll');
        document.querySelectorAll('.nav-item.dropdown').forEach(function (item) {
          item.classList.remove('open');
        });
      }
    });

    // Reset on resize
    window.addEventListener('resize', function () {
      if (window.innerWidth > 992) {
        toggle.classList.remove('active');
        navLinks.classList.remove('active');
        body.classList.remove('no-scroll');
        document.querySelectorAll('.nav-item.dropdown').forEach(function (item) {
          item.classList.remove('open');
        });
      }
    });
  });
{% endjavascript %}

{% schema %}
{
  "name": "Custom Navbar",
  "settings": [
    {
      "type": "image_picker",
      "id": "logo",
      "label": "Logo"
    },
    {
      "type": "link_list",
      "id": "main_menu",
      "label": "Main Menu",
      "default": "main-menu"
    },
    {
      "type": "text",
      "id": "contact_button_text",
      "default": "Contact Us",
      "label": "Contact Button Text"
    },
    {
      "type": "url",
      "id": "contact_button_link",
      "label": "Contact Button Link"
    },
    {
      "type": "text",
      "id": "ticket_button_text",
      "default": "Buy Tickets",
      "label": "Ticket Button Text"
    },
    {
      "type": "url",
      "id": "ticket_button_link",
      "label": "Ticket Button Link"
    }
  ],
  "presets": [
    {
      "name": "Custom Navbar",
      "category": "Header"
    }
  ]
}
{% endschema %}
